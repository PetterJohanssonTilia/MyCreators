{% extends 'base.html' %}
{% load static %}
{% block content %}
{{ creators|length}} {{ followed_creators|length }}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6 text-center">
            <div class="creator-nav">
                <button type="button" id="explore_button" class="creator-button active" data-target="explore">Explore Creators</button>
                <button type="button" id="followed_button" class="creator-button unactive" data-target="followed">Followed Creators</button>
            </div>
        </div>
    </div>

    <div class="mt-4">
        <div id="explore_creators" class="shown">
            <div class="row">
                {% for creator in creators %}
                    <div class="col-md-4 mb-4">
                        <div class="card" style="width: 18rem;">
                            <a href="{% url 'creator_aboutme' username=creator.user.username %}">
                                {% if creator.avatar %}
                                    <img class="card-img-top" src="{{ creator.avatar.url }}" alt="{{ creator.user.username }}'s avatar" class="avatar">
                                {% else %}
                                    <img class="card-img-top" src="{% static 'images/placeholderavatar.png' %}" alt="{{ creator.user.username }}'s avatar" class="avatar">
                                {% endif %}
                            </a>
                            <div class="card-body">
                                <a href="{% url 'creator_aboutme' username=creator.user.username %}">
                                    <h5 class="card-title">{{ creator.user.username }}</h5>
                                </a>
                                <p class="card-text">{{ creator.about_me|truncatewords:20 }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div id="followed_creators" class="hidden">
            <div class="row">
                {% if followed_creators %}
                    {% for creator in followed_creators %}
                        <div class="col-md-4 mb-4">
                            <div class="card" style="width: 18rem;">
                                <a href="{% url 'creator_aboutme' username=creator.user.username %}">
                                    {% if creator.avatar %}
                                        <img class="card-img-top" src="{{ creator.avatar.url }}" alt="{{ creator.user.username }}'s avatar" class="avatar">
                                    {% else %}
                                        <img class="card-img-top" src="{% static 'images/placeholderavatar.png' %}" alt="{{ creator.user.username }}'s avatar" class="avatar">
                                    {% endif %}
                                </a>
                                <div class="card-body">
                                    <a href="{% url 'creator_aboutme' username=creator.user.username %}">
                                        <h5 class="card-title">{{ creator.user.username }}</h5>
                                    </a>
                                    <p class="card-text">{{ creator.about_me|truncatewords:20 }}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    {% else %}
                        <div class="col-12">
                            <p>You are not following any creators yet.</p>
                        </div>                
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block extra_scripts %}
    <script>
        /* ===== Creators page Explore/followed switch ====== */
        document.addEventListener('DOMContentLoaded', function () {
            const explore_button = document.getElementById('explore_button');
            const followed_button = document.getElementById('followed_button');
            const explore_creators = document.getElementById('explore_creators');
            const followed_creators = document.getElementById('followed_creators');

            explore_button.addEventListener('click', function () {
                explore_creators.classList.add('shown');
                explore_creators.classList.remove('hidden');
                explore_button.classList.add('active');
                explore_button.classList.remove('unactive');
                followed_button.classList.add('unactive');
                followed_button.classList.remove('active');
                followed_creators.classList.add('hidden');
                followed_creators.classList.remove('shown');                
            });

            followed_button.addEventListener('click', function () {
                followed_creators.classList.add('shown');
                followed_creators.classList.remove('hidden');
                followed_button.classList.add('active');
                followed_button.classList.remove('unactive');
                explore_button.classList.add('unactive');
                explore_button.classList.remove('active');
                explore_creators.classList.add('hidden');
                explore_creators.classList.remove('shown');
            });
        });
    </script>
{% endblock %}